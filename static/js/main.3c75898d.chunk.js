(this["webpackJsonpdiagnal-assignment-app"]=this["webpackJsonpdiagnal-assignment-app"]||[]).push([[0],{31:function(e,t,a){e.exports=a(84)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},64:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=(a(36),a(37),a(7)),i=a(8),l=a(11),u=a(10),p=(a(38),a(27)),g=a.n(p),h=a(9),m=function(e){return{type:"GET_DATA_SUCCESS",value:e}},d=function(){return{type:"GET_DATA"}},f=function(e){return{type:"GET_DATA_FAILURE",value:e}},v=a(4),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onSearchChangeHandler=function(t){e.props.setSearchString(t.target.value)},e.onSearchClick=function(){e.props.searchString.length>2?e.props.getSearchedData(e.props.searchString):alert("Search String must be atleast 3 characters in length or use Back button to return to main page")},e.onBackClick=function(){e.props.backButtonClicked()},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"TopNavBar"},r.a.createElement("img",{src:"./Assets/NavBar/Back.png",className:"Nav_back_img",alt:"Nav_back_img",onClick:this.onBackClick}),r.a.createElement("h3",{className:"Nav_item1"},this.props.title),r.a.createElement("input",{className:"Nav_search",placeholder:"Search",onChange:this.onSearchChangeHandler}),r.a.createElement("img",{src:"./Assets/NavBar/search.png",className:"Nav_item",onClick:this.onSearchClick,alt:"search"}))}}]),a}(n.Component),S=Object(v.b)((function(e){return{searchString:e.searchString,title:e.Title}}),(function(e){return{setSearchString:function(t){return e(function(e){return{type:"SET_SEARCH_DATA",value:e}}(t))},getSearchedData:function(t){return e(function(e){return{type:"GET_SEARCH_DATA",value:e}}(t))},backButtonClicked:function(){return e({type:"SET_SEARCHING_STATE"})}}}))(E);var b,A=function(){return r.a.createElement("div",{className:"Post"},r.a.createElement("img",{src:"./Assets/Posters/placeholder_for_missing_posters.png",alt:"not found"}))},_=(a(64),a(29)),T=a.n(_),k=function(e){var t=Object(h.usePromiseTracker)().promiseInProgress;return console.log("Loading"),t&&r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(T.a,{type:"TailSpin",color:"black",height:"20%",width:"30%"}))},N=function(e){Object(l.a)(c,e);var t=Object(u.a)(c);function c(){var e;Object(s.a)(this,c);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).post_tracker=0,e.onScrollHandler=function(t){var a=t.currentTarget,n=a.innerHeight,r=a.scrollY;document.documentElement.offsetHeight-r<n+300&&e.props.pageNo<3&&!1===e.props.loading&&b!==e.props.pageNo&&(console.log("Loading Next Page number "+(e.props.pageNo+1)),b=e.props.pageNo,e.props.getPageData(e.props.pageNo+1))},e.loadPosts=function(t){return t.map((function(t){e.post_tracker++;var c=r.a.lazy((function(){return a.e(3).then(a.bind(null,86))}));return r.a.createElement(n.Suspense,{fallback:r.a.createElement(A,null),key:e.post_tracker},r.a.createElement(c,{title:t.name,img:t["poster-image"]}))}))},e}return Object(i.a)(c,[{key:"componentDidMount",value:function(){this.props.getPageData(this.props.pageNo),window.addEventListener("scroll",this.onScrollHandler)}},{key:"render",value:function(){var e=!1===this.props.searching?this.loadPosts(this.props.Posts):this.loadPosts(this.props.searchedData);return r.a.createElement("div",null,r.a.createElement("div",{className:"MainPage"},e,!0===this.props.searching&&this.props.searchedData.length<=0?r.a.createElement("p",null,"No Data Found!!"):null,r.a.createElement(k,null)))}}]),c}(n.Component),j=Object(v.b)((function(e){return{pageNo:e.pageNo,Posts:e.Posts,searching:e.searching,searchedData:e.searchedData,loading:e.loading}}),(function(e){return{getPageData:function(t){return e(function(e){return function(t){Object(h.trackPromise)(g.a.get("https://diagnal-api.herokuapp.com/pages/page"+e).then((function(e){t(d()),t(m(e.data))})).catch((function(e){t(f(e))})))}}(t))}}}))(N);var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=a(5),D=a(3),y={pageNo:1,Title:"",Posts:[],error:"",loading:!1,searchString:"",searchedData:[],searching:!1};var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA":return Object(D.a)({},e);case"GET_DATA_SUCCESS":return Object(D.a)(Object(D.a)({},e),{},{pageNo:parseInt(t.value.page["page-num-requested"],10),Title:t.value.page.title,Posts:e.Posts.concat(t.value.page["content-items"].content)});case"GET_DATA_FAILURE":return console.log(t.value),Object(D.a)(Object(D.a)({},e),{},{Title:null,Posts:null,error:t.value});case"SET_SEARCH_DATA":return Object(D.a)(Object(D.a)({},e),{},{searchString:t.value});case"GET_SEARCH_DATA":var a=e.searchString,n=e.Posts.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())?e:null}));return console.log(n),Object(D.a)(Object(D.a)({},e),{},{searching:!0,searchedData:n});case"SET_SEARCHING_STATE":return Object(D.a)(Object(D.a)({},e),{},{searching:!1});default:return e}},w=a(30),H=Object(O.c)(P,Object(O.a)(w.a));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,{store:H},r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.3c75898d.chunk.js.map